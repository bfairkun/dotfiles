#!/bin/bash

## USAGE
## start_rstudio_server [logfile]
##
## ~/.start_rstudio_server.log as default [log] if none provided

LOG=${1:-~/.start_rstudio_server.log}
rm -f $LOG

JOBID=$(sbatch --parsable --output $LOG ~/bin/rstudio_server.sbatch) &&

# print pending job status on slurm. When status changes, watch the log
watch -n 1 -g "squeue --state=PENDING --job=$JOBID"
watch -n 1 cat $LOG

